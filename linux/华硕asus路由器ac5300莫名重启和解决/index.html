<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <title>华硕ASUS路由器AC5300莫名重启和解决 - 小新实验室</title>
  
  <meta name="description" content="问题我的华硕路由器有时莫名奇妙的重启 出问题设备和版本 ASUS AC5300 3.0.0.4.384.45149 首先查看系统日志 May 5 13:05:25 weini: [软件中心]: httpdb进程准备就绪！ May 5 13:05:25 WAN Connection: WAN was restored. May 5 13:05:25 WLCEVENTD: eth8: Assoc D4:90:9C:E7:D2:03 May 5 13:05:26 kernel: UBIFS (ubi1:0): UBIFS: mounted UBI device 1, volume 0, name &quot;nvram&quot;, R/O mode May 5 13:05:26 kernel: UBIFS (ubi1:0): LEB size: 126976 bytes (124 KiB), min./max. I/O unit sizes: 2048 bytes/2048 bytes May 5 13:05:26 kernel: UBIFS (ubi1:0): FS size: 5840896 bytes (5 MiB, 46 LEBs), journal size 1015809 bytes (0 MiB, 6 LEBs) May 5 13:05:26 kernel: UBIFS (ubi1:0): reserved for root: 275879 bytes (269 KiB) May 5 13:05:26 kernel: UBIFS (ubi1:0): media format: w4/r0 (latest is w4/r0), UUID ABA6F10C-0F1C-4B89-AD25-4B74DEC12700, small LPT model May 5 13:05:26 kernel: UBIFS (ubi1:0): un-mount UBI device 1 May 5 13:05:26 kernel: ubi1: detaching mtd9 May 5 13:05:26 kernel: ubi1: mtd9 is detached May 5 13:05:26 ntp: start NTP update Mar 30 00:32:50 rc_service: ntp 1229:notify_rc restart_diskmon Mar 30 00:32:50 rc_service: waitting &quot;start_firewall&quot; via udhcpc .">
  <meta name="author" content="">
  
  <link href="https://charles-one.github.io/xiaoxinLab/css/font.css" rel="stylesheet">
  <link href="https://charles-one.github.io/xiaoxinLab/css/atom-one-dark.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i" rel="stylesheet">
  <link href="https://charles-one.github.io/xiaoxinLab/css/style.css" rel="stylesheet">
  
  <link rel="apple-touch-icon" href="https://charles-one.github.io/xiaoxinLab/img/apple-touch-icon.png">
  <link rel="icon" href="https://charles-one.github.io/xiaoxinLab/img/favicon.ico">
  
  <meta name="generator" content="Hugo 0.54.0" />
  
  <link rel="alternate" type="application/atom+xml" href="https://charles-one.github.io/xiaoxinLab/index.xml" title="小新实验室">
  
</head>
<body class="single">
  <header class="header">
    
    <p class="title"><a href="https://charles-one.github.io/xiaoxinLab/">小新实验室</a></p>
    
    <button class="menu-toggle" type="button"></button>
    <nav class="menu">
      <ul>
        
        
      </ul>
    </nav>
  </header>
  <main class="main">

<article class="post post-view">
  <header class="post-header">
    <h1 class="post-title">华硕ASUS路由器AC5300莫名重启和解决</h1>
    <p class="post-meta">2019.3.30</p>
  </header>
  <div class="post-content">

<h3 id="问题我的华硕路由器有时莫名奇妙的重启">问题我的华硕路由器有时莫名奇妙的重启</h3>

<h4 id="出问题设备和版本-asus-ac5300-3-0-0-4-384-45149">出问题设备和版本 ASUS AC5300 3.0.0.4.384.45149</h4>

<h4 id="首先查看系统日志">首先查看系统日志</h4>

<pre><code>May  5 13:05:25 weini: [软件中心]: httpdb进程准备就绪！
May  5 13:05:25 WAN Connection: WAN was restored.
May  5 13:05:25 WLCEVENTD: eth8: Assoc D4:90:9C:E7:D2:03
May  5 13:05:26 kernel: UBIFS (ubi1:0): UBIFS: mounted UBI device 1, volume 0, name &quot;nvram&quot;, R/O mode
May  5 13:05:26 kernel: UBIFS (ubi1:0): LEB size: 126976 bytes (124 KiB), min./max. I/O unit sizes: 2048 bytes/2048 bytes
May  5 13:05:26 kernel: UBIFS (ubi1:0): FS size: 5840896 bytes (5 MiB, 46 LEBs), journal size 1015809 bytes (0 MiB, 6 LEBs)
May  5 13:05:26 kernel: UBIFS (ubi1:0): reserved for root: 275879 bytes (269 KiB)
May  5 13:05:26 kernel: UBIFS (ubi1:0): media format: w4/r0 (latest is w4/r0), UUID ABA6F10C-0F1C-4B89-AD25-4B74DEC12700, small LPT model
May  5 13:05:26 kernel: UBIFS (ubi1:0): un-mount UBI device 1
May  5 13:05:26 kernel: ubi1: detaching mtd9
May  5 13:05:26 kernel: ubi1: mtd9 is detached
May  5 13:05:26 ntp: start NTP update
Mar 30 00:32:50 rc_service: ntp 1229:notify_rc restart_diskmon
Mar 30 00:32:50 rc_service: waitting &quot;start_firewall&quot; via udhcpc ...
Mar 30 00:32:50 WLCEVENTD: eth6: Assoc F0:B4:29:B0:E8:1B
Mar 30 00:32:51 kernel: ubi1: attaching mtd9
Mar 30 00:32:51 kernel: ubi1: scanning is finished
Mar 30 00:32:51 kernel: ubi1: attached mtd9 (name &quot;misc1&quot;, size 8 MiB)
Mar 30 00:32:51 kernel: ubi1: PEB size: 131072 bytes (128 KiB), LEB size: 126976 bytes
Mar 30 00:32:51 kernel: ubi1: min./max. I/O unit sizes: 2048/2048, sub-page size 2048
Mar 30 00:32:51 kernel: ubi1: VID header offset: 2048 (aligned 2048), data offset: 4096
Mar 30 00:32:51 kernel: ubi1: good PEBs: 64, bad PEBs: 0, corrupted PEBs: 0

</code></pre>

<h5 id="在mar-30-00-32-50-3月30日-00-32-50-重启-查看上一步什么操作造成重启的">在Mar 30 00:32:50(3月30日 00:32:50)重启, 查看上一步什么操作造成重启的</h5>

<h5 id="可以看到-may-5-13-05-26-ntp-start-ntp-update-五月5日-13-05-26-启动ntp更新-ntp是同步路由器时间的">可以看到 May  5 13:05:26 ntp: start NTP update (五月5日 13:05:26 启动NTP更新, NTP是同步路由器时间的)</h5>

<h5 id="现在3月30日-所以清楚ntp可以获取正确时间-这个时间更新造成路由器重启">现在3月30日, 所以清楚NTP可以获取正确时间, 这个时间更新造成路由器重启.</h5>

<h4 id="所以莫名重启原因是什么进程把正常时间更新成错误时间may-5-5月5日-了">所以莫名重启原因是什么进程把正常时间更新成错误时间May 5(5月5日)了</h4>

<h4 id="查看之前的日志">查看之前的日志</h4>

<pre><code>Mar 30 00:16:56 afpd[18425]: ad_valid_header_osx(&quot;/tmp/mnt/sda1/.__folder_list.txt&quot;): not an adouble:osx file
Mar 30 00:16:56 afpd[18425]: ad_valid_header_osx(&quot;/tmp/mnt/sda1/.__weini_var.txt&quot;): not an adouble:osx file
Mar 30 00:17:58 afpd[18425]: ad_valid_header_osx(&quot;/tmp/mnt/sda1/.___var.txt&quot;): not an adouble:osx file
Mar 30 00:17:58 afpd[18425]: ad_valid_header_osx(&quot;/tmp/mnt/sda1/.__folder_list.txt&quot;): not an adouble:osx file
Mar 30 00:17:58 afpd[18425]: ad_valid_header_osx(&quot;/tmp/mnt/sda1/.__weini_var.txt&quot;): not an adouble:osx file
Mar 30 00:19:38 afpd[18425]: ad_valid_header_osx(&quot;/tmp/mnt/sda1/.___var.txt&quot;): not an adouble:osx file
Mar 30 00:19:38 afpd[18425]: ad_valid_header_osx(&quot;/tmp/mnt/sda1/.__folder_list.txt&quot;): not an adouble:osx file
Mar 30 00:19:38 afpd[18425]: ad_valid_header_osx(&quot;/tmp/mnt/sda1/.__weini_var.txt&quot;): not an adouble:osx file
May  5 13:05:08 kernel: klogd started: BusyBox v1.24.1 (2018-12-27 20:18:22 CST)
May  5 13:05:08 kernel: Linux version 4.1.27 (sadog@ubuntu) (gcc version 5.3.0 (Buildroot 2016.02) ) #2 SMP PREEMPT Thu Dec 27 20:40:52 CST 2018
May  5 13:05:08 kernel: CPU: AArch64 Processor [420f1000] revision 0
May  5 13:05:08 kernel: Kernel command line: coherent_pool=1M cpuidle_sysfs_switch
May  5 13:05:08 kernel: Virtual kernel memory layout:
May  5 13:05:08 kernel:     vmalloc : 0xffffff8000000000 - 0xffffffbdffff0000   (   247 GB)
May  5 13:05:08 kernel:     vmemmap : 0xffffffbe00000000 - 0xffffffbfc0000000   (     7 GB maximum)
May  5 13:05:08 kernel:               0xffffffbe00000000 - 0xffffffbe00e00000   (    14 MB actual)
May  5 13:05:08 kernel:     fixed   : 0xffffffbffabfd000 - 0xffffffbffac00000   (    12 KB)
May  5 13:05:08 kernel:     PCI I/O : 0xffffffbffae00000 - 0xffffffbffbe00000   (    16 MB)
May  5 13:05:08 kernel:     modules : 0xffffffbffc000000 - 0xffffffc000000000   (    64 MB)

</code></pre>

<h4 id="可以看到mar-30-00-19-38-后">可以看到Mar 30 00:19:38 后</h4>

<h4 id="may-5-13-05-08-kernel-klogd-started-busybox-v1-24-1-2018-12-27-20-18-22-cst">May  5 13:05:08 kernel: klogd started: BusyBox v1.24.1 (2018-12-27 20:18:22 CST)</h4>

<h4 id="klogd这个服务启动后-时间就更新成错误的了">klogd这个服务启动后, 时间就更新成错误的了</h4>

<h4 id="查询klogd这个服务是做什么的-做了什么操作-klogd是busybox工具包中">查询klogd这个服务是做什么的, 做了什么操作, klogd是BusyBox工具包中</h4>

<h4 id="在华硕路由器系统设置中开启ssh-ssh登录到华硕路由器中">在华硕路由器系统设置中开启ssh, ssh登录到华硕路由器中</h4>

<h5 id="查看-etc-tz-内容是gmt-8-etc-localtime内容有cst-8-表示时区设置是正确的">查看/etc/TZ 内容是GMT-8, /etc/localtime内容有CST-8, 表示时区设置是正确的</h5>

<h4 id="推测ntp获取时间失败造成的">推测NTP获取时间失败造成的</h4>

<h4 id="系统设置-系统设置-ntp服务器-更改为">系统设置-系统设置-NTP服务器, 更改为</h4>

<pre><code>cn.ntp.org.cn
</code></pre>

<h4 id="这几天验证下">这几天验证下</h4>

<h4 id="最后也找到一个帖子">最后也找到一个帖子</h4>

<p><a href="https://forum.pcmech.com/threads/asus-router-system-logs-i-dont-get-it.238661/">帖子地址</a></p>
</div>
  <footer class="post-footer">
    
  </footer>
  
  
  
  
</article>
</main>
<footer class="footer">
  <span>&copy; 2019 小新实验室</span>
  <span>&middot;</span>
  <span>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>️</span>
  <span>&middot;</span>
  <span>Designed by <a href="http://21beats.com/" rel="noopener" target="_blank">️21beats️</a>️</span>
</footer>
<script src="https://charles-one.github.io/xiaoxinLab/js/instantclick.min.js" data-no-instant></script>
<script data-no-instant>InstantClick.init();</script>
<script src="https://charles-one.github.io/xiaoxinLab/js/highlight.min.js" data-no-instant></script>
<script data-no-instant>
  addMenuListener();
  InstantClick.on('change', function() {
    addMenuListener();
  });
  function addMenuListener() {
    var $toggle = document.querySelector('.menu-toggle');
    var $body = document.querySelector('body');
    $toggle.addEventListener('click', function() {
      $body.classList.toggle('noscroll');
    }, false);
  }
</script>
</body>
</html>

