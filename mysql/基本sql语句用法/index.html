<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <title>基本SQL语句用法 - 小新实验室</title>
    
    <meta name="description" content="建立表 4个表关系 1.学生表
Student(s_id,s_name,s_birth,s_sex) –学生编号,学生姓名, 出生年月,学生性别
2.课程表
Course(c_id,c_name,t_id) – –课程编号, 课程名称, 教师编号
3.教师表
Teacher(t_id,t_name) –教师编号,教师姓名
4.成绩表
Score(s_id,c_id,s_s_score) –学生编号,课程编号,分数
插入对应的数据 -- 插入学生表测试数据 insert into Student values(&#39;01&#39; , &#39;赵雷&#39; , &#39;1990-01-01&#39; , &#39;男&#39;); insert into Student values(&#39;02&#39; , &#39;钱电&#39; , &#39;1990-12-21&#39; , &#39;男&#39;); insert into Student values(&#39;03&#39; , &#39;孙风&#39; , &#39;1990-05-20&#39; , &#39;男&#39;); insert into Student values(&#39;04&#39; , &#39;李云&#39; , &#39;1990-08-06&#39; , &#39;男&#39;); insert into Student values(&#39;05&#39; , &#39;周梅&#39; , &#39;1991-12-01&#39; , &#39;女&#39;); insert into Student values(&#39;06&#39; , &#39;吴兰&#39; , &#39;1992-03-01&#39; , &#39;女&#39;); insert into Student values(&#39;07&#39; , &#39;郑竹&#39; , &#39;1989-07-01&#39; , &#39;女&#39;); insert into Student values(&#39;08&#39; , &#39;王菊&#39; , &#39;1990-01-20&#39; , &#39;女&#39;); insert into Student values(&#39;09&#39; , &#39;如花&#39; , &#39;1991-02-15&#39; , &#39;女&#39;); -- 课程表测试数据 insert into Course values(&#39;01&#39; , &#39;语文&#39; , &#39;02&#39;); insert into Course values(&#39;02&#39; , &#39;数学&#39; , &#39;01&#39;); insert into Course values(&#39;03&#39; , &#39;英语&#39; , &#39;03&#39;); insert into Course values(&#39;04&#39; , &#39;体育&#39; , &#39;01&#39;); -- 教师表测试数据 insert into Teacher values(&#39;01&#39; , &#39;张三&#39;); insert into Teacher values(&#39;02&#39; , &#39;李四&#39;); insert into Teacher values(&#39;03&#39; , &#39;王五&#39;); -- 成绩表测试数据 insert into Score values(&#39;01&#39; , &#39;01&#39; , 80); insert into Score values(&#39;01&#39; , &#39;02&#39; , 90); insert into Score values(&#39;01&#39; , &#39;03&#39; , 99); insert into Score values(&#39;02&#39; , &#39;01&#39; , 70); insert into Score values(&#39;02&#39; , &#39;02&#39; , 60); insert into Score values(&#39;02&#39; , &#39;03&#39; , 80); insert into Score values(&#39;03&#39; , &#39;01&#39; , 80); insert into Score values(&#39;03&#39; , &#39;02&#39; , 80); insert into Score values(&#39;03&#39; , &#39;03&#39; , 80); insert into Score values(&#39;04&#39; , &#39;01&#39; , 50); insert into Score values(&#39;04&#39; , &#39;02&#39; , 30); insert into Score values(&#39;04&#39; , &#39;03&#39; , 20); insert into Score values(&#39;05&#39; , &#39;01&#39; , 76); insert into Score values(&#39;05&#39; , &#39;02&#39; , 87); insert into Score values(&#39;06&#39; , &#39;01&#39; , 31); insert into Score values(&#39;06&#39; , &#39;03&#39; , 34); insert into Score values(&#39;07&#39; , &#39;02&#39; , 89); insert into Score values(&#39;07&#39; , &#39;03&#39; , 98); insert into Score values(&#39;09&#39;, &#39;01&#39;, 50); insert into Score values(&#39;09&#39;, &#39;02&#39;, 40); insert into Score values(&#39;09&#39;, &#39;03&#39;, 90); insert into Score values(&#39;09&#39;, &#39;04&#39;, 99);  SQL练习  查询姓&rdquo;张&rdquo;老师的个数">
    <meta name="author" content="">
    
    <link href="https://charles-one.github.io/xiaoxinLab/css/github-gist.min.css" rel="stylesheet">
    <link href="https://charles-one.github.io/xiaoxinLab/css/style.css" rel="stylesheet">
    
    <link rel="icon" href="https://charles-one.github.io/xiaoxinLab/img/favicon.ico">
    
    <meta name="generator" content="Hugo 0.54.0" />
    
    <link rel="alternate" type="application/atom+xml" href="https://charles-one.github.io/xiaoxinLab/index.xml" title="小新实验室">
    
    
  </head>
  <body class="single">
    <header class="header">
      <div class="wrap">
        
        <p class="logo"><a href="https://charles-one.github.io/xiaoxinLab/">小新实验室 </a></p>
        
        <button class="menu-toggle" type="button"></button>
      </div>
    </header>
    <nav class="nav">
    <ul class="menu">
      
      
    </ul>
    </nav>
    <main class="main">


<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">基本SQL语句用法</h1>
    <div class="post-meta">2019.3.12</div>
  </header>
  <div class="post-content">

<h3 id="建立表-4个表关系">建立表 4个表关系</h3>

<p>1.学生表</p>

<p>Student(s_id,s_name,s_birth,s_sex) –学生编号,学生姓名, 出生年月,学生性别</p>

<p>2.课程表</p>

<p>Course(c_id,c_name,t_id) – –课程编号, 课程名称, 教师编号</p>

<p>3.教师表</p>

<p>Teacher(t_id,t_name) –教师编号,教师姓名</p>

<p>4.成绩表</p>

<p>Score(s_id,c_id,s_s_score) –学生编号,课程编号,分数</p>

<h4 id="插入对应的数据">插入对应的数据</h4>

<pre><code class="language-sql">-- 插入学生表测试数据
insert into Student values('01' , '赵雷' , '1990-01-01' , '男');
insert into Student values('02' , '钱电' , '1990-12-21' , '男');
insert into Student values('03' , '孙风' , '1990-05-20' , '男');
insert into Student values('04' , '李云' , '1990-08-06' , '男');
insert into Student values('05' , '周梅' , '1991-12-01' , '女');
insert into Student values('06' , '吴兰' , '1992-03-01' , '女');
insert into Student values('07' , '郑竹' , '1989-07-01' , '女');
insert into Student values('08' , '王菊' , '1990-01-20' , '女');
insert into Student values('09' , '如花' , '1991-02-15' , '女');

-- 课程表测试数据
insert into Course values('01' , '语文' , '02');
insert into Course values('02' , '数学' , '01');
insert into Course values('03' , '英语' , '03');
insert into Course values('04' , '体育' , '01');

-- 教师表测试数据
insert into Teacher values('01' , '张三');
insert into Teacher values('02' , '李四');
insert into Teacher values('03' , '王五');

-- 成绩表测试数据
insert into Score values('01' , '01' , 80);
insert into Score values('01' , '02' , 90);
insert into Score values('01' , '03' , 99);
insert into Score values('02' , '01' , 70);
insert into Score values('02' , '02' , 60);
insert into Score values('02' , '03' , 80);
insert into Score values('03' , '01' , 80);
insert into Score values('03' , '02' , 80);
insert into Score values('03' , '03' , 80);
insert into Score values('04' , '01' , 50);
insert into Score values('04' , '02' , 30);
insert into Score values('04' , '03' , 20);
insert into Score values('05' , '01' , 76);
insert into Score values('05' , '02' , 87);
insert into Score values('06' , '01' , 31);
insert into Score values('06' , '03' , 34);
insert into Score values('07' , '02' , 89);
insert into Score values('07' , '03' , 98);
insert into Score values('09', '01', 50);
insert into Score values('09', '02', 40);
insert into Score values('09', '03', 90);
insert into Score values('09', '04', 99);

</code></pre>

<h3 id="sql练习">SQL练习</h3>

<ul>
<li><p>查询姓&rdquo;张&rdquo;老师的个数</p>

<pre><code class="language-sql">select count(t_id) from Teacher where t_name like &quot;张%&quot;;
</code></pre></li>

<li><p>查询1990年出生的学生名单</p>

<pre><code class="language-sql">select s_id, s_name from Student where year(s_birth)=1990;
</code></pre></li>

<li><p>查询课程编号为&rdquo;02&rdquo;的总成绩</p>

<pre><code class="language-sql">select c_id,sum(s_score) as '总成绩' from Score where c_id=02;
</code></pre></li>

<li><p>查询选了课程的学生人数
思路学生唯一, 然后再计算总数</p>

<pre><code class="language-sql">select count(distinct s_id) as &quot;选课人数&quot; from Score;
</code></pre></li>

<li><p>查询各科成绩最高和最低的分: 以如下的形式显示: 课程ID, 最高分, 最低分</p>

<pre><code class="language-sql">select c_id as 课程ID, max(s_score) as 最高分, min(s_score) as 最低分 from Score group by c_id;
</code></pre></li>

<li><p>查询每门课程被选修的学生数</p>

<pre><code class="language-sql">select c_id, count(s_id) from Score group by c_id;
</code></pre></li>

<li><p>查询男生,女生人数</p></li>
</ul>

<pre><code class="language-sql">select s_sex as 性别, count(s_id) as 人数 from Student group by s_sex;
</code></pre>

<ul>
<li>查询平均成绩大于60分的学生的学号和平均成绩</li>
</ul>

<p>学号与平均成绩都在Score表中可以获取到</p>

<pre><code class="language-sql">select s_id as 学号, avg(s_score) as 平均成绩 from Score group by s_id having avg(s_score)&gt;60;
</code></pre>

<ul>
<li><p>查询至少选修两门课程的学生学号
学生学号与学生选修课程数都在Score表中</p>

<pre><code class="language-sql">select s_id as 学号,count(c_id) as 选修课程数 from Score group by s_id having count(c_id)&gt;=2;
</code></pre></li>

<li><p>查询两门以上不及格课程的同学的学号及其平均成绩</p>

<h4 id="这种做法是错误的-只计算不及格课程的平均成绩-如果还有其他课程及格就未计算在内了">这种做法是错误的, 只计算不及格课程的平均成绩, 如果还有其他课程及格就未计算在内了</h4>

<pre><code class="language-sql">select s_id as 学号, avg(s_score)as 平均成绩
from Score
where s_score &lt;60
group by s_id
having count(c_id)&gt;=2;
</code></pre>

<h4 id="学生学号-学生不及格课程总数-平均成绩都在score表中-但是一条语句无法查询出来-不及格条件后的平均成绩是不正确-即是不及格课程的平均成绩-不是总成绩-包含及格与不及格课程成绩">学生学号, 学生不及格课程总数, 平均成绩都在Score表中, 但是一条语句无法查询出来,不及格条件后的平均成绩是不正确(即是不及格课程的平均成绩),不是总成绩(包含及格与不及格课程成绩).</h4></li>
</ul>

<pre><code class="language-sql">-- 查询到不及格课程总断&gt;2的学生
select s_id from Score where s_score&lt;60 group by s_id having count(c_id)&gt;2;

-- 查询学生的总成绩计算的平均成绩
select s_id,avg(s_score) as avg_score from Score group by s_id;

-- 将2表内连接起来
select s1.s_id, s2.avg_score
from
(select s_id from Score where s_score&lt;60 group by s_id having count(c_id)&gt;2) as s1
join
(select s_id,avg(s_score) as avg_score from Score group by s_id) as s2
on s1.s_id=s2.s_id;
</code></pre>

<h4 id="这次查询不及格课程数-1的学生-学号-平均成绩-09号有3门课程-三门成绩-40-50-90-3-60-错误做法只计算不及格成绩-40-50-2-45">这次查询不及格课程数&gt;1的学生,学号,平均成绩.(&ldquo;09号有3门课程,三门成绩(40+50+90)/3=60&rdquo;, 错误做法只计算不及格成绩(40+50)/2=45)</h4>

<pre><code class="language-sql">
-- 错误做法
select s_id as 学号, avg(s_score)as 平均成绩
from Score
where s_score &lt;60
group by s_id
having count(c_id)&gt;1;

-- 正确做法
select s1.s_id, s2.avg_score
from
(select s_id from Score where s_score&lt;60 group by s_id having count(c_id)&gt;1) as s1
join
(select s_id,avg(s_score) as avg_score from Score group by s_id) as s2
on s1.s_id=s2.s_id;
</code></pre>

<ul>
<li><p>查询名字完全一致的学生, 统计同名人数</p>

<pre><code class="language-sql">-- 名字, 同名人数都在表Student中
select s_name, count(s_id) as 同名人数 from Student group by s_name having count(s_id)&gt;1;
</code></pre></li>

<li><p>查询每门课程的平均成绩，结果按平均成绩升序排序，平均成绩相同时，按课程号降序排列</p>

<pre><code class="language-sql">select c_id, avg(s_score) as '平均成绩' from Score group by c_id order by avg(s_score) ASC, c_id DESC;
</code></pre></li>

<li><p>查询不及格课程号和学生号, 课程号从大到小排列
```sql
&ndash; 这些不及格课程号与学生号数据都在Score表中</p></li>
</ul>

<p>select s_id, c_id, s_score from Score where s_score &lt;60;</p>

<pre><code>
* 检索课程编号为“03”且分数小于60的学生学号，结果按按分数降序排列
```sql
select s_id, s_score from Score where c_id=03 and s_score&lt;60;
</code></pre>

<ul>
<li><p>统计每门课程的学生选修人数(超过5人的课程才统计), 要求输出课程号和选修人数，查询结果按人数降序排序，若人数相同，按课程号升序排序</p>

<pre><code class="language-sql">select c_id, count(s_id) from Score group by c_id having count(s_id)&gt;5 order by count(s_id) DESC, c_id ASC;
</code></pre></li>

<li><p>查询所有课程成绩小于60分的学生的学号、姓名.
学生成绩在表Score中, 学生姓名在表Student, 内连接2个表
```sql
&ndash; 小于60分的学生号
select s_id, s_score where s_score&lt;60;</p></li>
</ul>

<p>&ndash; 学生姓名</p>

<p>select s_id, s_name from Student;</p>

<p>&ndash; 通过s_id内连接2个表, 2个成绩&lt;60分会有2条数据, 可用group by去重</p>

<p>select sco.s_id,s.s_name from Score as sco join Student as s on sco.s_id=s.s_id where s_score&lt;60 group by s_id;</p>

<p>&ndash; 还可以这么写
select s_id,s_name from Student where s_id in (select s_id from Score where s_score&lt;60);</p>

<pre><code>
* 查询没有学全所有课的学生的学号、姓名
#### 全部课程数在Course中, 学生所选课程在Score中, 学生姓名在Student中.(隐藏条件学生所学课程一定属于全部课程中的一种)
#### 理解是学没有学全所有课程的所有学号与学生姓名(注意是所有学生)
```sql
-- 查询全部课程数
select count(c_id) from Course;

-- 查询学生学号与课程数
select s_id, count(c_id) as count_cid from Score group by s_id;

-- 查询学生学号与学生姓名
select s_id, s_name from Student;

-- 左连Student与Score表, 为什么左连接, 因为是没有学无所有课程的学生, 学生一定会有, 学生不一定有选修的课程成绩.
select s.s_id, s.s_name from 
Student as s 
left join 
Score as sco 
on sco.s_id=s.s_id 
group by s.s_id 
having count(c_id)&lt;(select count(c_id) from Course);

</code></pre>

<ul>
<li><p>查询出只选修了两门课程的全部学生的学号和姓名</p>

<h4 id="学生选修课程数在score表中-学生姓名在表student中">学生选修课程数在Score表中, 学生姓名在表Student中</h4>

<p>```sql</p></li>
</ul>

<p>&ndash; 查询学生选择课程数为2的学生
select s_id,count(c_id) group by s_id having count(c_id)=2;</p>

<p>&ndash; 查询学生姓名</p>

<p>select s_id, s_name from Student;</p>

<p>&ndash; 左连接2个表</p>

<p>select s.s_id, s.s_name from
Student as s
left join
Score as sco
on s.s_id=sco.s_id
group by s.s_id having count(c_id)=2;</p>

<pre><code>
* 查询课程编号为03且课程成绩在80分以上的学生的学号和姓名
#### 学生选修课程与成绩在Score表中, 学生姓名在表Student中
```sql
-- 查询课程03,&gt;80的学生成绩
select s_id, s_score, c_id from Score where c_id=&quot;03&quot; and s_score&gt;80;

-- 查询学生姓名

select s_id, s_name from Student;

-- 内连接2个表, 注意不是左右连接,有对应成绩的才检索,否则不检索
select s.s_id, s.s_name from 
Student as s 
join 
Score as sco 
on s.s_id=sco.s_id
and sco.s_score&gt;80 and sco.c_id=&quot;03&quot;;

-- 其他写法

select s_id, s_name from Student where s_id in (select s_id from Score where s_score&gt;80 and c_id=03);
</code></pre>

<ul>
<li><p>查询课程编号为“01”的课程比“02”的课程成绩高的所有学生的学号
内连接 s1同学.s_id=s2同学.s_id, s1.c_id=&ldquo;01&rdquo;, s2.c_id=&ldquo;02&rdquo;, s1.s_score&gt;s2.s_score, 最后去重</p>

<pre><code class="language-sql">select s1.s_id from Score s1,Score s2 where s1.s_id=s2.s_id and s1.c_id=&quot;01&quot; and s2.c_id=&quot;02&quot; and s1.s_score&gt;s2.s_score group by s1.s_id;
</code></pre></li>

<li><p>按平均成绩从高到低，按如下形式显示: 学生ID, 有效课程数, 有效平均分</p>

<pre><code class="language-sql">select s_id '学生ID', count(c_id) '有效课程数', avg(s_score) '有效平均分' from Score group by s_id;
</code></pre></li>

<li><p>使用分段[100-85],[85-70],[70-60],[&lt;60]来统计各科成绩，分别统计各分数段人数: 课程ID和课程名称</p></li>
</ul>

<pre><code class="language-sql">select c.c_id, c.c_name, sum(case when sco.s_score&gt;=85 and sco.s_score&lt;=100 then 1 else 0 end) as '[100-85]',
sum(case when sco.s_score&gt;=70 and sco.s_score&lt;85 then 1 else 0 end) as '[85-70]',
sum(case when sco.s_score&gt;=60 and sco.s_score&lt;70 then 1 else 0 end) as '[70-60]',
sum(case when sco.s_score&lt;60 then 1 else 0 end) as '[&lt;60]'
from Course c  join  Score sco on sco.c_id=c.c_id group by c.c_id;
</code></pre>

<ul>
<li><p>查询出每门课程的及格人数和不及格人数</p>

<pre><code class="language-sql">select c_id,
sum(case when s_score&gt;=60 then 1 else 0 end) as '及格人数',
sum(case when s_score&lt;60 then 1 else 0 end) as '不及格人数' 
from Score group by c_id;
</code></pre></li>

<li><p>查询出每门课程的及格百分数</p>

<pre><code class="language-sql">select c_id, sco.及格人数/(sco.及格人数+sco.不及格人数)*100 as '及格百分比' from (
select c_id, 
sum(case when s_score&gt;=60 then 1 else 0 end) as '及格人数',
sum(case when s_score&lt;60 then 1 else 0 end) as '不及格人数' 
from Score group by c_id
) as sco;
</code></pre></li>

<li><p>查询至少有一门课与学号为“01”的学生所学课程相同的学生的学号和姓名</p>

<h4 id="注意是其他学生-应该去除自己s-id-01-的情况">注意是其他学生, 应该去除自己s_id=&ldquo;01&rdquo;的情况</h4>

<p>```sql
select s_id,s_name from Student where s_id in (select s_id from Score where c_id in (select c_id from Score where s_id=&ldquo;02&rdquo;) group by s_id);</p></li>
</ul>

<p>&ndash; 内连接</p>

<p>select s.s_id, s.s_name from
Student s join Score sco on s.s_id=sco.s_id and sco.c_id in (select c_id from Score where s_id=&lsquo;01&rsquo;) and sco.s_id&lt;&gt;01 group by s.s_id;;</p>

<pre><code>
* 查询和“01”号同学所学课程完全相同的其他同学的学号
#### 注意是其他学生, 应该去除自己s_id=&quot;01&quot;的情况
#### 属于的&quot;01&quot;学生的课程数, 应该与&quot;01&quot;学生的总课程数一致才算完全一致.
```sql
-- 计算&quot;01&quot;号学生的课程数
select count(c_id) from Score where s_id=&quot;01&quot;;

-- 计算其他学生属于&quot;01&quot;课程的课程数

select s_id from Score where c_id in (select c_id from Score where s_id=&quot;01&quot;) and s_id&lt;&gt;01 group by s_id having count(c_id)=(select count(c_id) from Score where s_id=&quot;01&quot;);
</code></pre>

<ul>
<li>把“SCORE”表中“张三”老师教的课的成绩都更改为此课程的平均成绩
```sql
&ndash; 查询&rdquo;张三老师名字和id&rdquo;
select t_id, t_name from Teacher where t_name=&ldquo;张三&rdquo;;</li>
</ul>

<p>&ndash; 查询张三老师的课程</p>

<p>select t_id, c_id from Course where t_id in (select t_id from Teacher where t_name=&ldquo;张三&rdquo;);</p>

<p>&ndash; 课程分组的平均成绩</p>

<p>select avg(s_score) as avg_score,c_id from Score group by c_id;</p>

<p>&ndash; 张三老师课程与课程分组平均成绩内连接</p>

<p>select t.t_id, t.c_id, sco.avg_score from
(select t_id, c_id from Course where t_id in (select t_id from Teacher where t_name=&ldquo;张三&rdquo;)) t
join
(select avg(s_score) as avg_score,c_id from Score group by c_id) sco
on t.c_id=sco.c_id;</p>

<p>&ndash; 内连接得到老师和学生课程成绩和每科的平均成绩
select * from Score as ss1 join (select sco.c_id as sco_cid,sco.avg_score as sco_avg_socre from
(select t_id, c_id from Course where t_id in (select t_id from Teacher where t_name=&ldquo;张三&rdquo;)) t
join
(select avg(s_score) as avg_score,c_id from Score group by c_id) sco
on t.c_id=sco.c_id) as ss2
on ss1.c_id=ss2.sco_cid;</p>

<p>&ndash; 更新上面的内连接表
update Score as ss1 join (select sco.c_id as sco_cid,sco.avg_score as sco_avg_socre from
(select t_id, c_id from Course where t_id in (select t_id from Teacher where t_name=&ldquo;张三&rdquo;)) t
join
(select avg(s_score) as avg_score,c_id from Score group by c_id) sco
on t.c_id=sco.c_id) as ss2
on ss1.c_id=ss2.sco_cid
set ss1.s_score=ss2.sco_avg_socre;</p>

<pre><code>
* 按各科平均成绩从低到高和及格率的百分数从高到低排列，以如下形式显示: 课程号，课程名平均成绩，及格百分数
```sql
-- 查询课程号与课程平均成绩
select c_id, avg(s_score) as avg_score from Score group by c_id;

-- 及格百分数

select s1.c_id, jige/all_chenji, s2.avg_score
from Score as s1
join (select sum(case when s_score &gt;=60 then 1 else 0 end) as jige,
count(s_id)all_chenji,
avg(s_score) as avg_score,
c_id
from Score group by c_id
) as s2 
on s1.c_id=s2.c_id group by s1.c_id 
order by s2.avg_score ASC, jige/all_chenji DESC;
</code></pre>

<ul>
<li><p>查询不同老师所教不同课程平均分从高到低显示</p>

<pre><code class="language-sql">select t.t_name, avg(s_score) from Teacher as t
join
Course as c
on t.t_id=c.t_id
join
Score as sco
on c.c_id=sco.c_id group by sco.c_id
order by avg(s_score) DESC;
</code></pre></li>

<li><p>查询学生平均成绩及其名次</p>

<pre><code class="language-sql">select s_id,avg(s_score),@curRank:=@curRank + 1
from Score s1,(select @curRank:=0) q group by s_id;
</code></pre></li>

<li><p>查询各科成绩前三名的记录（不考虑成绩并列情况）</p>

<h3 id="待解决">待解决</h3></li>

<li><p>查询所有学生的学号、姓名、选课数、总成绩</p>

<h4 id="所有学生-用左连接-查到所有学生">所有学生, 用左连接, 查到所有学生</h4>

<pre><code class="language-sql">-- 学号,姓名在Student表中, 学号,选课数,总成绩在Score表中, 左连接起来
select s.s_id, s.s_name,count(c_id),sum(s_score) from Student as s
left join
Score as sco
on s.s_id=sco.s_id
group by s_id;
</code></pre></li>

<li><p>查询平均成绩大于85的所有学生的学号、姓名和平均成绩</p>

<pre><code class="language-sql">-- 学号,姓名在Student表中, 平均成绩,选课数在Score表中, 左连接起来
select s.s_id, s.s_name,avg(s_score) from Student as s
left join
Score as sco
on s.s_id=sco.s_id
group by s_id
having avg(s_score)&gt;85;
</code></pre></li>

<li><p>查询有2门不同课程成绩相同的学生的学号、课程号、学生成绩</p>

<pre><code class="language-sql">select s1.s_id,s1.c_id,s1.s_score from Score s1,Score s2
where s1.s_id=s2.s_id
and s1.s_score=s2.s_score
and s1.c_id&lt;&gt;s2.c_id
group by s1.s_id,s1.c_id;
</code></pre></li>

<li><p>查询选修了全部课程的学生信息
```sql
select * from Student where s_id in (select s_id from Score group by s_id having count(c_id)=(select count(c_id) from Course));</p></li>
</ul>

<p>```</p>
</div>
  <footer class="post-footer">
    
  </footer>
  
  
  
  
</article>

</main>
<footer class="footer">
  <span>&copy; 2019 小新实验室</span>
</footer>
<script src="https://charles-one.github.io/xiaoxinLab/js/instantclick.min.js" data-no-instant></script>
<script data-no-instant>InstantClick.init();</script>
<script src="https://charles-one.github.io/xiaoxinLab/js/highlight.min.js" data-no-instant></script>
<script data-no-instant>
  hljs.initHighlightingOnLoad();
  setMenuListener();

  InstantClick.on('change', function() {
    document.querySelectorAll('pre code').forEach((block) => {
      hljs.highlightBlock(block);
    });
    setMenuListener();
  });

  function setMenuListener() {
    var menuToggle = document.querySelector('.menu-toggle');
    var body = document.querySelector('body');
    menuToggle.addEventListener('click', function() {
      body.classList.toggle('no-scroll');
    }, false);
  }
</script>
</body>
</html>

